"use strict";(self.webpackChunkto_do_list=self.webpackChunkto_do_list||[]).push([[47],{47:(s,e,a)=>{a.r(e),a.d(e,{default:()=>g});var r=a(555),n=a(289),t=a(43),i=a(204),d=a(178),o=a.n(d),l=a(603),c=a(630),h=a(886),x=a(291),j=a(699),m=a(579);const p=s=>{let{task:e,onClose:a,onDelete:r}=s;const n=(0,t.useContext)(h.c),{error:d,sendRequest:p,errorHandler:u}=(0,x.x)(),[k,g]=(0,t.useState)(!1),A=()=>g(!1);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j.A,{error:d,onClear:u}),(0,m.jsx)(c.A,{show:!0,onCancel:a,header:(0,m.jsxs)("div",{className:"modal-header",children:[(0,m.jsxs)("h2",{children:[(s=>{switch(s){case"todo":default:return(0,m.jsx)(i.kkc,{});case"inProgress":return(0,m.jsx)(i.hW,{});case"done":return(0,m.jsx)(i.A7C,{})}})(e.status),e.title]}),(0,m.jsx)("button",{className:"close-button",onClick:a,children:(0,m.jsx)(i.QCr,{})})]}),footer:(0,m.jsxs)("div",{className:"modal-footer",children:[(0,m.jsx)(l.A,{inverse:!0,onClick:a,children:"Close"}),(0,m.jsxs)(l.A,{to:"/tasks/".concat(e.id),className:"update-btn",children:[(0,m.jsx)(i.uO9,{})," Edit Task"]}),(0,m.jsxs)(l.A,{danger:!0,onClick:()=>g(!0),className:"delete-btn",children:[(0,m.jsx)(i.qbC,{})," Delete Task"]})]}),children:(0,m.jsxs)("div",{className:"modal-overlay",children:[(0,m.jsxs)("div",{className:"task-description",children:[(0,m.jsxs)("h3",{children:[(0,m.jsx)(i.kkc,{}),"Task Description"]}),(0,m.jsx)("p",{children:e.description})]}),(0,m.jsxs)("div",{className:"task-content",children:[(0,m.jsxs)("div",{className:"date-item",children:[(0,m.jsx)(i.bfZ,{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:"Due Date"}),(0,m.jsx)("p",{children:o()(e.dueDate).format("MMMM D, YYYY")})]})]}),(0,m.jsxs)("div",{className:"priority-item ".concat(e.priority.toLowerCase()),children:[(0,m.jsx)(i.TNq,{style:{color:(s=>{switch(s.toLowerCase()){case"high":return"#ff4757";case"medium":return"#ffa502";case"low":return"#2ed573";default:return"#00b894"}})(e.priority)}}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:"Priority Level"}),(0,m.jsx)("p",{children:e.priority})]})]}),(0,m.jsxs)("div",{className:"timeline-item",children:[(0,m.jsx)(i.w_X,{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:"Timeline"}),(0,m.jsx)("p",{children:e.timeline})]})]}),(0,m.jsxs)("div",{className:"assigned-users-item",children:["admin"===e.role?(0,m.jsx)(i.e7y,{}):(0,m.jsx)(i.YXz,{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:"Task Creator"}),(0,m.jsx)("p",{children:e.creatorName})]})]}),e.assignedUsers&&e.assignedUsers.length>0&&(0,m.jsxs)("div",{className:"assigned-users-item",children:[(0,m.jsx)(i.M5n,{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:"Assigned Team Members"}),(0,m.jsx)("div",{className:"assigned-users-list",children:e.assignedUsers.map((s=>(0,m.jsxs)("span",{className:"assigned-user",children:[(0,m.jsx)(i.YXz,{}),s.name]},s.id)))})]})]}),(0,m.jsxs)("div",{className:"notes-item",children:[(0,m.jsx)(i.jie,{}),(0,m.jsxs)("div",{children:[(0,m.jsx)("h4",{children:"Additional Notes"}),(0,m.jsx)("p",{children:e.notes||"No additional notes provided."})]})]})]})]})}),(0,m.jsx)(c.A,{show:k,onCancel:A,header:"Confirm Task Deletion",footer:(0,m.jsxs)("div",{className:"confirm-actions",children:[(0,m.jsx)(l.A,{inverse:!0,onClick:A,children:"Cancel"}),(0,m.jsxs)(l.A,{danger:!0,onClick:async()=>{g(!1);try{await p("https://task-manager-wsm4.onrender.com/api"+"/tasks/".concat(e.id),"DELETE",null,{Authorization:"Bearer "+n.token}),r(e.id),a()}catch(d){console.error("Error deleting task:",d)}},children:[(0,m.jsx)(i.qbC,{})," Delete Task"]})]}),children:(0,m.jsxs)("div",{className:"confirm-content",children:[(0,m.jsx)(i.TNq,{className:"warning-icon"}),(0,m.jsx)("h3",{children:"Are you sure you want to delete this task?"}),(0,m.jsxs)("p",{children:['This will permanently delete "',e.title,'" and all its associated data. This action cannot be undone. Please make sure you have backed up any important information.']})]})})]})};var u=a(863),k=a(216);const g=()=>{const[s,e]=(0,t.useState)({todo:{id:"todo",title:"To Do",taskIds:[],icon:(0,m.jsx)(i.kkc,{}),description:"Tasks that need to be started"},inProgress:{id:"inProgress",title:"In Progress",taskIds:[],icon:(0,m.jsx)(i.hW,{}),description:"Tasks currently being worked on"},done:{id:"done",title:"Done",taskIds:[],icon:(0,m.jsx)(i.A7C,{}),description:"Completed tasks"}}),[a,d]=(0,t.useState)({}),[l,c]=(0,t.useState)(null),{isLoading:g,error:A,sendRequest:f,errorHandler:v}=(0,x.x)(),N=(0,t.useContext)(h.c),y=(0,k.g)().userId;(0,t.useEffect)((()=>{(async()=>{let a;try{if(a=await f("https://task-manager-wsm4.onrender.com/api"+"/tasks/user/".concat(y),"GET",null,{Authorization:"Bearer "+N.token}),!a||!Array.isArray(a))return void console.error("Invalid response format:",a);const n={},t={todo:[],inProgress:[],done:[]};a.forEach((s=>{n[s.id]=s;const e=s.status||"todo";t.hasOwnProperty(e)&&t[e].push(s.id)})),d(n),e({todo:(0,r.A)((0,r.A)({},s.todo),{},{taskIds:t.todo}),inProgress:(0,r.A)((0,r.A)({},s.inProgress),{},{taskIds:t.inProgress}),done:(0,r.A)((0,r.A)({},s.done),{},{taskIds:t.done})})}catch(n){console.error("Error fetching tasks:",n)}})()}),[f,N.token,y]);return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(j.A,{error:A,onClear:v}),g&&(0,m.jsx)(u.A,{}),(0,m.jsxs)("div",{className:"users-tasks-container",children:[(0,m.jsxs)("div",{className:"tasks-header",children:[(0,m.jsx)("h1",{children:"Task Management Dashboard"}),(0,m.jsx)("p",{children:"Welcome to your personal task management space. Here you can organize, track, and manage all your tasks efficiently. Drag and drop tasks between columns to update their status, and click on any task to view or edit its details."})]}),(0,m.jsx)(n.JY,{onDragEnd:async n=>{const{destination:t,source:i,draggableId:o}=n;if(!t)return;if(t.droppableId===i.droppableId&&t.index===i.index)return;const l=s[i.droppableId],c=s[t.droppableId],h=(0,r.A)({},s),x=Array.from(l.taskIds);x.splice(i.index,1);const j=Array.from(c.taskIds);j.splice(t.index,0,o),h[i.droppableId]=(0,r.A)((0,r.A)({},l),{},{taskIds:x}),h[t.droppableId]=(0,r.A)((0,r.A)({},c),{},{taskIds:j}),e(h);try{await f("".concat("https://task-manager-wsm4.onrender.com/api","/tasks/").concat(o,"/status"),"PATCH",JSON.stringify({status:t.droppableId}),{"Content-Type":"application/json",Authorization:"Bearer "+N.token}),d((0,r.A)((0,r.A)({},a),{},{[o]:(0,r.A)((0,r.A)({},a[o]),{},{status:t.droppableId})}))}catch(m){e(s),console.error(m)}},children:(0,m.jsx)("div",{className:"kanban-container",children:Object.values(s).map((s=>(0,m.jsxs)("div",{className:"kanban-column",children:[(0,m.jsxs)("h3",{className:"column-title",children:[s.icon,s.title]}),(0,m.jsx)(n.gL,{droppableId:s.id,children:e=>(0,m.jsxs)("div",(0,r.A)((0,r.A)({ref:e.innerRef},e.droppableProps),{},{className:"task-list",children:[0===s.taskIds.length?(0,m.jsxs)("div",{className:"no-tasks-message",children:[(0,m.jsx)(i.ZPX,{}),(0,m.jsxs)("p",{children:["No tasks found in ",s.title]})]}):s.taskIds.map(((s,e)=>{const t=a[s];return t?(0,m.jsx)(n.sx,{draggableId:t.id,index:e,children:s=>(0,m.jsxs)("div",(0,r.A)((0,r.A)((0,r.A)({ref:s.innerRef},s.draggableProps),s.dragHandleProps),{},{className:"task-card priority-".concat(t.priority.toLowerCase()),onClick:()=>c(t),children:[(0,m.jsx)("h4",{className:"task-title",children:t.title}),(0,m.jsx)("p",{className:"task-desc",children:t.description}),(0,m.jsxs)("div",{className:"task-info",children:[(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)(i.w_X,{}),o()(t.dueDate).format("MMM D")]}),(0,m.jsxs)("div",{className:"info-item",children:[(0,m.jsx)(i.TNq,{}),t.priority]}),(0,m.jsxs)("div",{className:"info-item",children:["admin"===t.role?(0,m.jsx)(i.e7y,{}):(0,m.jsx)(i.YXz,{}),t.creatorName]}),t.assignedUsers&&t.assignedUsers.length>0&&(0,m.jsxs)("div",{className:"info-item assigned-users",children:[(0,m.jsx)(i.YXz,{}),t.assignedUsers.map(((s,e)=>(0,m.jsxs)("span",{className:"assigned-user",children:[s.name,e<t.assignedUsers.length-1?", ":""]},s.id)))]})]})]}))},t.id):null})),e.placeholder]}))})]},s.id)))})})]}),l&&(0,m.jsx)(p,{task:l,onClose:()=>c(null),onDelete:s=>{d((e=>{const a=(0,r.A)({},e);return delete a[s],a})),e((e=>{const a=(0,r.A)({},e);return Object.keys(a).forEach((e=>{a[e]=(0,r.A)((0,r.A)({},a[e]),{},{taskIds:a[e].taskIds.filter((e=>e!==s))})})),a}))}})]})}}}]);
//# sourceMappingURL=47.97e4ff3d.chunk.js.map