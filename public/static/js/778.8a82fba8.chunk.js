"use strict";(self.webpackChunkto_do_list=self.webpackChunkto_do_list||[]).push([[778],{497:()=>{},778:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var t=a(43),l=a(216),i=a(837),n=a(603),r=a(820),o=a(699),d=a(863),c=a(962),u=a(805),p=a(291),h=(a(497),a(886)),m=a(579);const v=()=>{const e=(0,t.useContext)(h.c),s=new URLSearchParams((0,l.zy)().search),a=s.get("email")||"",v=s.get("token")||"",[w,A]=(0,t.useState)(null),{isLoading:x,error:N,sendRequest:y,errorHandler:j}=(0,p.x)(),[f,C]=(0,u.m)({newPassword:{value:"",isValid:!1},confirmPassword:{value:"",isValid:!1}},!1),V=(0,l.Zp)();return a&&v?(0,m.jsxs)("div",{className:"auth-container",children:[(0,m.jsx)(o.A,{error:N,onClear:j}),(0,m.jsx)("div",{className:"auth-content",children:(0,m.jsxs)(i.A,{className:"auth",children:[x&&(0,m.jsx)(d.A,{}),(0,m.jsx)("h2",{className:"auth-header",children:"Reset Password"}),w?(0,m.jsx)("p",{style:{color:"green",margin:"1rem 0"},children:w}):(0,m.jsxs)("form",{onSubmit:async s=>{if(s.preventDefault(),f.inputs.newPassword.value!==f.inputs.confirmPassword.value)return A(null),j("Passwords do not match.");try{await y("https://task-manager-wsm4.onrender.com/api/users/reset-password","POST",JSON.stringify({email:a,token:v,newPassword:f.inputs.newPassword.value}),{"Content-Type":"application/json",Authorization:"Bearer "+e.token}),A("Your password has been reset successfully. You can now log in.")}catch(t){}},children:[(0,m.jsx)(r.A,{id:"newPassword",element:"input",label:"New Password",type:"password",errorText:"Please enter a valid password, at least 6 characters.",validators:[(0,c.Ik)(6)],onInput:C,placeholder:"Enter new password"}),(0,m.jsx)(r.A,{id:"confirmPassword",element:"input",label:"Confirm Password",type:"password",errorText:"Passwords must match.",validators:[(0,c.Ik)(6)],onInput:C,placeholder:"Confirm new password"}),(0,m.jsx)(n.A,{type:"submit",className:"auth__button",disabled:!f.isValid,children:"Reset Password"})]}),(0,m.jsx)(n.A,{className:"switch__button",onClick:()=>V("/auth"),children:"Back to Login"})]})})]}):(0,m.jsx)("div",{className:"auth-container",children:(0,m.jsx)("div",{className:"auth-content",children:(0,m.jsxs)(i.A,{className:"auth",children:[(0,m.jsx)("h2",{className:"auth-header",children:"Invalid Link"}),(0,m.jsx)("p",{children:"Reset link is invalid or missing required parameters."}),(0,m.jsx)(n.A,{className:"switch__button",onClick:()=>V("/auth"),children:"Back to Login"})]})})})}},805:(e,s,a)=>{a.d(s,{m:()=>n});var t=a(555),l=a(43);const i=(e,s)=>{switch(s.type){case"INPUT_CHANGE":let a=!0;for(const t in e.inputs)e.inputs[t]&&(a=t===s.inputId?a&&s.isValid:a&&e.inputs[t].isValid);return(0,t.A)((0,t.A)({},e),{},{inputs:(0,t.A)((0,t.A)({},e.inputs),{},{[s.inputId]:{value:s.value,isValid:s.isValid}}),isValid:a});case"SET_DATA":return{inputs:s.inputs,isValid:s.formIsValid};default:return e}},n=(e,s)=>{const[a,t]=(0,l.useReducer)(i,{inputs:e,isValid:s});return[a,(0,l.useCallback)(((e,s,a)=>{t({type:"INPUT_CHANGE",value:s,isValid:a,inputId:e})}),[]),(0,l.useCallback)(((e,s)=>{t({type:"SET_DATA",inputs:e,formIsValid:s})}),[])]}},820:(e,s,a)=>{a.d(s,{A:()=>o});var t=a(555),l=a(43),i=a(962),n=a(579);const r=(e,s)=>{switch(s.type){case"CHANGE":return(0,t.A)((0,t.A)({},e),{},{value:s.val,isValid:(0,i.tf)(s.val,s.isValid)});case"TOUCH":return(0,t.A)((0,t.A)({},e),{},{isTouch:!0});case"RADIO_CHANGE":return(0,t.A)((0,t.A)({},e),{},{value:s.val,isValid:(0,i.tf)(s.val,(0,i.B_)())});default:return e}},o=e=>{const[s,a]=(0,l.useReducer)(r,{value:e.initialValue||"",isTouch:!1,isValid:e.initialValid||!1}),{id:t,onInput:i}=e,{value:o,isValid:d}=s;(0,l.useEffect)((()=>{"function"===typeof i&&i(t,o,d)}),[t,o,d,i]);const c=s=>{a({type:"CHANGE",val:s.target.value,validators:e.validators})},u=()=>{a({type:"TOUCH"})},p=s=>s.map((s=>(0,n.jsxs)("label",{className:s.className,children:[(0,n.jsx)("input",{type:"radio",name:s.id,value:s.value,checked:o===s.value,onChange:()=>{return e=s.value,void a({type:"RADIO_CHANGE",value:e});var e},onBlur:u}),(0,n.jsx)("span",{className:e.span,children:s.label})]},s.value))),h="input"===e.element?(0,n.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:c,onBlur:u,value:s.value}):"radio"===e.element?(0,n.jsxs)("div",{className:e.className,children:[(0,n.jsx)("label",{className:"radio-inputs__title",children:e.label}),(0,n.jsx)("hr",{}),()=>p(e.radioOptions)]}):(0,n.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:c,onBlur:u,value:s.value});return(0,n.jsxs)("div",{className:"form-control ".concat(!s.isValid&&s.isTouch&&"form-control--invalid"),children:["radio"!==e.element&&(0,n.jsx)("label",{htmlFor:e.id,children:e.label}),h,!s.isValid&&s.isTouch&&(0,n.jsx)("p",{children:e.errorText})]})}},837:(e,s,a)=>{a.d(s,{A:()=>l});a(43);var t=a(579);const l=e=>(0,t.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},962:(e,s,a)=>{a.d(s,{B_:()=>r,Ik:()=>o,i$:()=>d,tf:()=>c});const t="REQUIRE",l="MINLENGTH",i="MAXLENGTH",n="EMAIL",r=()=>({type:t}),o=e=>({type:l,val:e}),d=()=>({type:n}),c=function(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!0;for(const r of s)r.type===t&&(a=a&&e.trim().length>0),r.type===l&&(a=a&&e.trim().length>=r.val),r.type===i&&(a=a&&e.trim().length<=r.val),"MIN"===r.type&&(a=a&&+e>=r.val),"MAX"===r.type&&(a=a&&+e<=r.val),r.type===n&&(a=a&&/^\S+@\S+\.\S+$/.test(e));return a}}}]);
//# sourceMappingURL=778.8a82fba8.chunk.js.map