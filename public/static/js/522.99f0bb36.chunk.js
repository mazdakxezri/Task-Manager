"use strict";(self.webpackChunkto_do_list=self.webpackChunkto_do_list||[]).push([[522],{522:(e,t,a)=>{a.r(t),a.d(t,{default:()=>x});var i=a(43),s=a(216),l=a(204),n=a(837),r=a(820),o=a(805),d=a(962),u=a(603),c=a(291),p=a(886),h=a(863),m=a(699),v=a(579);const x=()=>{const e=(0,i.useContext)(p.c),[t,a]=(0,i.useState)(),x=(0,s.g)().taskId,{isLoading:j,error:f,sendRequest:A,errorHandler:N}=(0,c.x)(),[y,V,k]=(0,o.m)({dueDate:{value:"",isValid:!1},timeline:{value:"",isValid:!1},notes:{value:"",isValid:!1}},!1),T=(0,s.Zp)();(0,i.useEffect)((()=>{(async()=>{try{const t=await A("http://localhost:5001/api"+"/tasks/".concat(x),"GET",null,{Authorization:"Bearer "+e.token});if(!t)throw new Error("No task data received");a(t);const i=new Date(t.dueDate).toISOString().split("T")[0];k({dueDate:{value:i,isValid:!0},timeline:{value:t.timeline||"",isValid:!0},notes:{value:t.notes||"",isValid:!0}},!0)}catch(f){console.error("Error fetching task:",f)}})()}),[A,x,k,e.token]);return j?(0,v.jsx)("div",{className:"center",children:(0,v.jsx)(h.A,{})}):t?(0,v.jsx)("div",{className:"update-task-page",children:(0,v.jsxs)("div",{className:"update-task-container",children:[(0,v.jsxs)("div",{className:"update-task-header",children:[(0,v.jsx)(l.uO9,{className:"update-task-icon"}),(0,v.jsx)("h2",{children:"Update Your Task"}),(0,v.jsx)("p",{children:"Modify your task details to keep your workflow organized and efficient."})]}),(0,v.jsx)(m.A,{error:f,onClear:N}),!j&&t&&(0,v.jsxs)("form",{className:"update-task-form",onSubmit:async t=>{t.preventDefault();try{const t={dueDate:y.inputs.dueDate.value,timeline:y.inputs.timeline.value,notes:y.inputs.notes.value};await A("http://localhost:5001/api"+"/tasks/".concat(x),"PATCH",JSON.stringify(t),{"Content-Type":"application/json",Authorization:"Bearer "+e.token})&&T("/user/".concat(e.userId))}catch(f){console.error("Error updating task:",f)}},children:[(0,v.jsxs)("div",{className:"form-group",children:[(0,v.jsxs)("label",{htmlFor:"dueDate",children:[(0,v.jsx)(l.bfZ,{className:"input-icon"}),"Due Date"]}),(0,v.jsx)(r.A,{id:"dueDate",element:"input",type:"date",errorText:"Please enter a date.",validators:[(0,d.B_)()],onInput:V,initialValue:t.dueDate?new Date(t.dueDate).toISOString().split("T")[0]:"",initialValid:!0})]}),(0,v.jsxs)("div",{className:"form-group",children:[(0,v.jsxs)("label",{htmlFor:"timeline",children:[(0,v.jsx)(l.w_X,{className:"input-icon"}),"Timeline"]}),(0,v.jsx)(r.A,{id:"timeline",element:"input",type:"text",errorText:"Please enter a timeline.",validators:[(0,d.B_)()],onInput:V,initialValue:t.timeline||"",initialValid:!0})]}),(0,v.jsxs)("div",{className:"form-group",children:[(0,v.jsxs)("label",{htmlFor:"notes",children:[(0,v.jsx)(l.jie,{className:"input-icon"}),"Notes"]}),(0,v.jsx)(r.A,{id:"notes",element:"textarea",type:"text",errorText:"Please enter notes (minimum 5 characters).",validators:[(0,d.Ik)(5)],onInput:V,initialValue:t.notes||"",initialValid:!0})]}),(0,v.jsx)(u.A,{type:"submit",disabled:!y.isValid,children:"Update Task"})]})]})}):(0,v.jsx)("div",{className:"center",children:(0,v.jsx)(n.A,{children:(0,v.jsx)("h2",{children:"Could not find task!"})})})}},805:(e,t,a)=>{a.d(t,{m:()=>n});var i=a(555),s=a(43);const l=(e,t)=>{switch(t.type){case"INPUT_CHANGE":let a=!0;for(const i in e.inputs)e.inputs[i]&&(a=i===t.inputId?a&&t.isValid:a&&e.inputs[i].isValid);return(0,i.A)((0,i.A)({},e),{},{inputs:(0,i.A)((0,i.A)({},e.inputs),{},{[t.inputId]:{value:t.value,isValid:t.isValid}}),isValid:a});case"SET_DATA":return{inputs:t.inputs,isValid:t.formIsValid};default:return e}},n=(e,t)=>{const[a,i]=(0,s.useReducer)(l,{inputs:e,isValid:t});return[a,(0,s.useCallback)(((e,t,a)=>{i({type:"INPUT_CHANGE",value:t,isValid:a,inputId:e})}),[]),(0,s.useCallback)(((e,t)=>{i({type:"SET_DATA",inputs:e,formIsValid:t})}),[])]}},820:(e,t,a)=>{a.d(t,{A:()=>o});var i=a(555),s=a(43),l=a(962),n=a(579);const r=(e,t)=>{switch(t.type){case"CHANGE":return(0,i.A)((0,i.A)({},e),{},{value:t.val,isValid:(0,l.tf)(t.val,t.isValid)});case"TOUCH":return(0,i.A)((0,i.A)({},e),{},{isTouch:!0});case"RADIO_CHANGE":return(0,i.A)((0,i.A)({},e),{},{value:t.val,isValid:(0,l.tf)(t.val,(0,l.B_)())});default:return e}},o=e=>{const[t,a]=(0,s.useReducer)(r,{value:e.initialValue||"",isTouch:!1,isValid:e.initialValid||!1}),{id:i,onInput:l}=e,{value:o,isValid:d}=t;(0,s.useEffect)((()=>{"function"===typeof l&&l(i,o,d)}),[i,o,d,l]);const u=t=>{a({type:"CHANGE",val:t.target.value,validators:e.validators})},c=()=>{a({type:"TOUCH"})},p=t=>t.map((t=>(0,n.jsxs)("label",{className:t.className,children:[(0,n.jsx)("input",{type:"radio",name:t.id,value:t.value,checked:o===t.value,onChange:()=>{return e=t.value,void a({type:"RADIO_CHANGE",value:e});var e},onBlur:c}),(0,n.jsx)("span",{className:e.span,children:t.label})]},t.value))),h="input"===e.element?(0,n.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:c,value:t.value}):"radio"===e.element?(0,n.jsxs)("div",{className:e.className,children:[(0,n.jsx)("label",{className:"radio-inputs__title",children:e.label}),(0,n.jsx)("hr",{}),()=>p(e.radioOptions)]}):(0,n.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:c,value:t.value});return(0,n.jsxs)("div",{className:"form-control ".concat(!t.isValid&&t.isTouch&&"form-control--invalid"),children:["radio"!==e.element&&(0,n.jsx)("label",{htmlFor:e.id,children:e.label}),h,!t.isValid&&t.isTouch&&(0,n.jsx)("p",{children:e.errorText})]})}},837:(e,t,a)=>{a.d(t,{A:()=>s});a(43);var i=a(579);const s=e=>(0,i.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},962:(e,t,a)=>{a.d(t,{B_:()=>r,Ik:()=>o,i$:()=>d,tf:()=>u});const i="REQUIRE",s="MINLENGTH",l="MAXLENGTH",n="EMAIL",r=()=>({type:i}),o=e=>({type:s,val:e}),d=()=>({type:n}),u=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=!0;for(const r of t)r.type===i&&(a=a&&e.trim().length>0),r.type===s&&(a=a&&e.trim().length>=r.val),r.type===l&&(a=a&&e.trim().length<=r.val),"MIN"===r.type&&(a=a&&+e>=r.val),"MAX"===r.type&&(a=a&&+e<=r.val),r.type===n&&(a=a&&/^\S+@\S+\.\S+$/.test(e));return a}}}]);
//# sourceMappingURL=522.99f0bb36.chunk.js.map