"use strict";(self.webpackChunkto_do_list=self.webpackChunkto_do_list||[]).push([[522],{522:(e,a,t)=>{t.r(a),t.d(a,{default:()=>x});var s=t(43),i=t(216),l=t(204),n=t(837),r=t(820),d=t(805),o=t(962),u=t(603),c=t(291),p=t(886),m=t(863),v=t(699),h=t(579);const x=()=>{const e=(0,s.useContext)(p.c),[a,t]=(0,s.useState)(),x=(0,i.g)().taskId,{isLoading:j,error:f,sendRequest:A,errorHandler:N}=(0,c.x)(),[y,V,k]=(0,d.m)({dueDate:{value:"",isValid:!1},timeline:{value:"",isValid:!1},notes:{value:"",isValid:!1}},!1),T=(0,i.Zp)();(0,s.useEffect)((()=>{(async()=>{try{const a=await A("https://task-manager-wsm4.onrender.com/api"+"/tasks/".concat(x),"GET",null,{Authorization:"Bearer "+e.token});if(!a)throw new Error("No task data received");t(a);const s=new Date(a.dueDate).toISOString().split("T")[0];k({dueDate:{value:s,isValid:!0},timeline:{value:a.timeline||"",isValid:!0},notes:{value:a.notes||"",isValid:!0}},!0)}catch(f){console.error("Error fetching task:",f)}})()}),[A,x,k,e.token]);return j?(0,h.jsx)("div",{className:"center",children:(0,h.jsx)(m.A,{})}):a?(0,h.jsx)("div",{className:"update-task-page",children:(0,h.jsxs)("div",{className:"update-task-container",children:[(0,h.jsxs)("div",{className:"update-task-header",children:[(0,h.jsx)(l.uO9,{className:"update-task-icon"}),(0,h.jsx)("h2",{children:"Update Your Task"}),(0,h.jsx)("p",{children:"Modify your task details to keep your workflow organized and efficient."})]}),(0,h.jsx)(v.A,{error:f,onClear:N}),!j&&a&&(0,h.jsxs)("form",{className:"update-task-form",onSubmit:async a=>{a.preventDefault();try{const a={dueDate:y.inputs.dueDate.value,timeline:y.inputs.timeline.value,notes:y.inputs.notes.value};await A("https://task-manager-wsm4.onrender.com/api"+"/tasks/".concat(x),"PATCH",JSON.stringify(a),{"Content-Type":"application/json",Authorization:"Bearer "+e.token})&&T("/user/".concat(e.userId))}catch(f){console.error("Error updating task:",f)}},children:[(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsxs)("label",{htmlFor:"dueDate",children:[(0,h.jsx)(l.bfZ,{className:"input-icon"}),"Due Date"]}),(0,h.jsx)(r.A,{id:"dueDate",element:"input",type:"date",errorText:"Please enter a date.",validators:[(0,o.B_)()],onInput:V,initialValue:a.dueDate?new Date(a.dueDate).toISOString().split("T")[0]:"",initialValid:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsxs)("label",{htmlFor:"timeline",children:[(0,h.jsx)(l.w_X,{className:"input-icon"}),"Timeline"]}),(0,h.jsx)(r.A,{id:"timeline",element:"input",type:"text",errorText:"Please enter a timeline.",validators:[(0,o.B_)()],onInput:V,initialValue:a.timeline||"",initialValid:!0})]}),(0,h.jsxs)("div",{className:"form-group",children:[(0,h.jsxs)("label",{htmlFor:"notes",children:[(0,h.jsx)(l.jie,{className:"input-icon"}),"Notes"]}),(0,h.jsx)(r.A,{id:"notes",element:"textarea",type:"text",errorText:"Please enter notes (minimum 5 characters).",validators:[(0,o.Ik)(5)],onInput:V,initialValue:a.notes||"",initialValid:!0})]}),(0,h.jsx)(u.A,{type:"submit",disabled:!y.isValid,children:"Update Task"})]})]})}):(0,h.jsx)("div",{className:"center",children:(0,h.jsx)(n.A,{children:(0,h.jsx)("h2",{children:"Could not find task!"})})})}},805:(e,a,t)=>{t.d(a,{m:()=>n});var s=t(555),i=t(43);const l=(e,a)=>{switch(a.type){case"INPUT_CHANGE":let t=!0;for(const s in e.inputs)e.inputs[s]&&(t=s===a.inputId?t&&a.isValid:t&&e.inputs[s].isValid);return(0,s.A)((0,s.A)({},e),{},{inputs:(0,s.A)((0,s.A)({},e.inputs),{},{[a.inputId]:{value:a.value,isValid:a.isValid}}),isValid:t});case"SET_DATA":return{inputs:a.inputs,isValid:a.formIsValid};default:return e}},n=(e,a)=>{const[t,s]=(0,i.useReducer)(l,{inputs:e,isValid:a});return[t,(0,i.useCallback)(((e,a,t)=>{s({type:"INPUT_CHANGE",value:a,isValid:t,inputId:e})}),[]),(0,i.useCallback)(((e,a)=>{s({type:"SET_DATA",inputs:e,formIsValid:a})}),[])]}},820:(e,a,t)=>{t.d(a,{A:()=>d});var s=t(555),i=t(43),l=t(962),n=t(579);const r=(e,a)=>{switch(a.type){case"CHANGE":return(0,s.A)((0,s.A)({},e),{},{value:a.val,isValid:(0,l.tf)(a.val,a.isValid)});case"TOUCH":return(0,s.A)((0,s.A)({},e),{},{isTouch:!0});case"RADIO_CHANGE":return(0,s.A)((0,s.A)({},e),{},{value:a.val,isValid:(0,l.tf)(a.val,(0,l.B_)())});default:return e}},d=e=>{const[a,t]=(0,i.useReducer)(r,{value:e.initialValue||"",isTouch:!1,isValid:e.initialValid||!1}),{id:s,onInput:l}=e,{value:d,isValid:o}=a;(0,i.useEffect)((()=>{"function"===typeof l&&l(s,d,o)}),[s,d,o,l]);const u=a=>{t({type:"CHANGE",val:a.target.value,validators:e.validators})},c=()=>{t({type:"TOUCH"})},p=a=>a.map((a=>(0,n.jsxs)("label",{className:a.className,children:[(0,n.jsx)("input",{type:"radio",name:a.id,value:a.value,checked:d===a.value,onChange:()=>{return e=a.value,void t({type:"RADIO_CHANGE",value:e});var e},onBlur:c}),(0,n.jsx)("span",{className:e.span,children:a.label})]},a.value))),m="input"===e.element?(0,n.jsx)("input",{id:e.id,type:e.type,placeholder:e.placeholder,onChange:u,onBlur:c,value:a.value}):"radio"===e.element?(0,n.jsxs)("div",{className:e.className,children:[(0,n.jsx)("label",{className:"radio-inputs__title",children:e.label}),(0,n.jsx)("hr",{}),()=>p(e.radioOptions)]}):(0,n.jsx)("textarea",{id:e.id,rows:e.rows||3,onChange:u,onBlur:c,value:a.value});return(0,n.jsxs)("div",{className:"form-control ".concat(!a.isValid&&a.isTouch&&"form-control--invalid"),children:["radio"!==e.element&&(0,n.jsx)("label",{htmlFor:e.id,children:e.label}),m,!a.isValid&&a.isTouch&&(0,n.jsx)("p",{children:e.errorText})]})}},837:(e,a,t)=>{t.d(a,{A:()=>i});t(43);var s=t(579);const i=e=>(0,s.jsx)("div",{className:"card ".concat(e.className),style:e.style,children:e.children})},962:(e,a,t)=>{t.d(a,{B_:()=>r,Ik:()=>d,i$:()=>o,tf:()=>u});const s="REQUIRE",i="MINLENGTH",l="MAXLENGTH",n="EMAIL",r=()=>({type:s}),d=e=>({type:i,val:e}),o=()=>({type:n}),u=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],t=!0;for(const r of a)r.type===s&&(t=t&&e.trim().length>0),r.type===i&&(t=t&&e.trim().length>=r.val),r.type===l&&(t=t&&e.trim().length<=r.val),"MIN"===r.type&&(t=t&&+e>=r.val),"MAX"===r.type&&(t=t&&+e<=r.val),r.type===n&&(t=t&&/^\S+@\S+\.\S+$/.test(e));return t}}}]);
//# sourceMappingURL=522.0acb5a12.chunk.js.map